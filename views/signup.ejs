<% include partials/head %>

  <body>
    <div class="col-sm-8 col-sm-offset-2">
      <div class="jumbotron text-center">
        <h1><span class="fa fa-sign-in"></span> Signup</h1>

        <% if (message != null) { %>
          <div class="alert-danger"><%= message %></div>
        <% } %>

        <form action="/signup" method="post">
            <div id="key_wait" style="display:none" class="w3-container w3-center w3-animate-opacity">
                <h3 style="color:red">Waiting for U2F key to register</h3>
                <div class="loader"></div>

            </div>
          <div class="form-group">
              <label>Email</label>
              <input type="text" class="form-control" name="email">
          </div>
          <div class="form-group">
            <label>Password</label>
            <input type="password" class="form-control" name="password" />
          </div>


			
          <div>
            <input type="submit" class="form-control" value="Submit" id="sub" />
          </div>
        </form>
		<script>
/* Get an authentication request from the server,
 * sign it with the key, verify the results on the server
 */	

/* Get a registration requedocument.getElementById("sub").disabled = true;
st from the server, use it to register the key, send the results back
 * to server and check if it was successful
 */

/* Very basic ajax functions */
function ajaxGet(url, cb) {
	var xhr = new XMLHttpRequest();
	xhr.open("GET", url);
	xhr.onload = function() {
			//alert("url "+url+"  cb"+xhr.responseText);

		cb(xhr.responseText);
	};
	xhr.send();
}
function ajaxPost(url, data, cb) {
	var xhr = new XMLHttpRequest();
	xhr.open("POST", url);
	xhr.setRequestHeader("Content-type", "application/json");
	xhr.onload = function() {
		cb(xhr.responseText);
	};
	xhr.send(JSON.stringify(data));
}
</script>
      </div>
      <hr>
      <span class="fa fa-sign-in"> Already have an account?<a href="/login"> Login</a></span>
      <p>Or go <a href="/">home</a>.</p>
    </div>
  </body>
</html>
